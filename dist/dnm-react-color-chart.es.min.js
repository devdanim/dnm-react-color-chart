import e,{memo as r}from"react";import t from"prop-types";function o(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function n(e){return(n=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function i(e,r){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,r){return e.__proto__=r,e})(e,r)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var u=r(function(r){var t=r.rgba,o=r.privateColor,a=r.className,n=r.onClick,i="string"==typeof t?t:null;return e.createElement("div",{className:a||"",style:{backgroundColor:i?"unset":"rgba(".concat(t[0],", ").concat(t[1],", ").concat(t[2],", ").concat(t[3],")"),position:"relative",opacity:o?"0.3":1},onClick:n},o&&"/",i)}),l=function(r){function t(e){var r;return function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,t),r=function(e,r){if(r&&("object"==typeof r||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return s(e)}(this,n(t).call(this,e)),a(s(r),"hexToRgb",function(e){return e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(e,r,t,o){return"#".concat(r).concat(r).concat(t).concat(t).concat(o).concat(o)}).substring(1).match(/.{2}/g).map(function(e){return parseInt(e,16)})}),a(s(r),"rgbToHsl",function(e,r,t){e/=255,r/=255,t/=255;var o=Math.min(e,r,t),a=Math.max(e,r,t),n=a-o,i=0,s=0;return i=0==n?0:a==e?(r-t)/n%6:a==r?(t-e)/n+2:(e-r)/n+4,(i=Math.round(60*i))<0&&(i+=360),s=(a+o)/2,[i,+(100*(0==n?0:n/(1-Math.abs(2*s-1)))).toFixed(1),s=+(100*s).toFixed(1)]}),a(s(r),"hslToRgb",function(e,r,t){for((r/=100)>1?r=1:r<0&&(r=0),(t/=100)>1?t=1:t<0&&(t=0);e<0;)e+=360;e%=360;var o=(1-Math.abs(2*t-1))*r,a=o*(1-Math.abs(e/60%2-1)),n=t-o/2,i=0,s=0,u=0;return e>=0&&e<60?(i=o,s=a,u=0):e>=60&&e<120?(i=a,s=o,u=0):e>=120&&e<180?(i=0,s=o,u=a):e>=180&&e<240?(i=0,s=a,u=o):e>=240&&e<300?(i=a,s=0,u=o):e>=300&&e<360&&(i=o,s=0,u=a),[i=Math.round(255*(i+n)),s=Math.round(255*(s+n)),u=Math.round(255*(u+n))]}),a(s(r),"getRgbaValue",function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return"string"==typeof e&&(e=r.hexToRgb(e)).push(1),t&&(e=r.offsetHslFromRgba(e,3.6*parseFloat(t.h),parseFloat(t.s),parseFloat(t.l))),e}),a(s(r),"offsetHslFromRgba",function(e,t,o,a){var n=r.rgbToHsl(e[0],e[1],e[2]),i=r.hslToRgb(n[0]+t,n[1]+o,n[2]+a);return[i[0],i[1],i[2],e[3]]}),a(s(r),"handleColorClick",function(e,t){var o=r.props.onColorClick;o&&o(e,t)}),r}var l,c,f;return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),r&&i(e,r)}(t,e.Component),l=t,(c=[{key:"render",value:function(){var r=this,t=this.props,o=t.classes,a=t.layout,n=t.colors,i=t.children,s=[],l={};for(var c in n){var f=a[c];if(f)if(n[c].match(/{{\s*[\w\.]+\s*}}/))switch(n[c]){case"{{ mainColor }}":s.push({id:c,value:"P"});break;case"{{ secondaryColor }}":s.push({id:c,value:"S"});break;case"{{ extraColor }}":s.push({id:c,value:"A"});break;case"{{ readableExtraColor }}":s.push({id:c,value:"T"});break;case"{{ lightColor }}":s.push({id:c,value:"B"});break;case"{{ darkColor }}":s.push({id:c,value:"N"});break;case"{{ mainGradientColor }}":s.push({id:c,value:"gP"});break;case"{{ secondaryGradientColor }}":s.push({id:c,value:"gS"})}else{var p=this.getRgbaValue(n[c]);f.static?l[c]=p:s.push({id:c,value:p})}else if(null===f){var h=this.getRgbaValue(n[c]);s.push({id:c,value:h,private:!0})}}for(var b in a){if(a[b]){var d=a[b],v=d.offset_hsl,g=d.offset_from;if(v&&g&&n[g])if(n[g].match(/{{\s*[\w\.]+\s*}}/))switch(n[g]){case"{{ mainColor }}":s.push({id:b,value:"_P"});break;case"{{ secondaryColor }}":s.push({id:b,value:"_S"});break;case"{{ extraColor }}":s.push({id:b,value:"_A"});break;case"{{ readableExtraColor }}":s.push({id:b,value:"_T"});break;case"{{ lightColor }}":s.push({id:b,value:"_B"});break;case"{{ darkColor }}":s.push({id:b,value:"_N"});break;case"{{ mainGradientColor }}":s.push({id:b,value:"_gP"});break;case"{{ secondaryGradientColor }}":s.push({id:b,value:"_gS"})}else s.push({id:b,value:this.getRgbaValue(n[g],v)})}}for(var m in a){a[m]&&(a[m].static&&(l[m]?s.push({id:m,value:l[m]}):s.push({id:m,value:this.getRgbaValue(a[m].static)})))}return e.createElement("div",{className:o&&o.root?o.root:""},s.map(function(t,a){var n;return e.createElement(u,{key:a,className:o&&o.item?o.item:"",rgba:t.value,privateColor:null!==(n=null==t?void 0:t.private)&&void 0!==n&&n,onClick:function(e){return r.handleColorClick(e,t)}})}),i)}}])&&o(l.prototype,c),f&&o(l,f),Object.defineProperty(l,"prototype",{writable:!1}),t}();l.propTypes={classes:t.shape({item:t.string,root:t.string}),layout:t.objectOf(t.shape({name:t.string.isRequired,offset_from:t.string,offset_hsl:t.shape({h:t.number,s:t.number,l:t.number}),static:t.string})).isRequired,colors:t.objectOf(t.string).isRequired,onColorClick:t.func};export default l;
