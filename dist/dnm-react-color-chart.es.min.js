import t from"react";import e from"prop-types";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function o(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function a(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return s(t)}var f=function(e){function n(){return r(this,n),l(this,c(n).apply(this,arguments))}return i(n,t.PureComponent),o(n,[{key:"render",value:function(){var e=this.props,r=e.rgba,n=e.className,o=e.onClick;return t.createElement("div",{className:n||"",style:{backgroundColor:"rgba(".concat(r[0],", ").concat(r[1],", ").concat(r[2],", ").concat(r[3],")")},onClick:o})}}]),n}(),p=function(e){function n(t){var e;return r(this,n),a(s(e=l(this,c(n).call(this,t))),"hexToRgb",function(t){return t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(t,e,r,n){return"#".concat(e).concat(e).concat(r).concat(r).concat(n).concat(n)}).substring(1).match(/.{2}/g).map(function(t){return parseInt(t,16)})}),a(s(e),"rgbToHsl",function(t,e,r){t/=255,e/=255,r/=255;var n=Math.min(t,e,r),o=Math.max(t,e,r),a=o-n,i=0,c=0;return i=0==a?0:o==t?(e-r)/a%6:o==e?(r-t)/a+2:(t-e)/a+4,(i=Math.round(60*i))<0&&(i+=360),c=(o+n)/2,[i,+(100*(0==a?0:a/(1-Math.abs(2*c-1)))).toFixed(1),c=+(100*c).toFixed(1)]}),a(s(e),"hslToRgb",function(t,e,r){for((e/=100)>1?e=1:e<0&&(e=0),(r/=100)>1?r=1:r<0&&(r=0);t<0;)t+=360;t%=360;var n=(1-Math.abs(2*r-1))*e,o=n*(1-Math.abs(t/60%2-1)),a=r-n/2,i=0,c=0,u=0;return t>=0&&t<60?(i=n,c=o,u=0):t>=60&&t<120?(i=o,c=n,u=0):t>=120&&t<180?(i=0,c=n,u=o):t>=180&&t<240?(i=0,c=o,u=n):t>=240&&t<300?(i=o,c=0,u=n):t>=300&&t<360&&(i=n,c=0,u=o),[i=Math.round(255*(i+a)),c=Math.round(255*(c+a)),u=Math.round(255*(u+a))]}),a(s(e),"getRgbaValue",function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return"string"==typeof t&&(t=e.hexToRgb(t)).push(1),r&&(t=e.offsetHslFromRgba(t,3.6*parseFloat(r.h),parseFloat(r.s),parseFloat(r.l))),t}),a(s(e),"offsetHslFromRgba",function(t,r,n,o){var a=e.rgbToHsl(t[0],t[1],t[2]),i=e.hslToRgb(a[0]+r,a[1]+n,a[2]+o);return[i[0],i[1],i[2],t[3]]}),a(s(e),"handleColorClick",function(t,r){var n=e.props.onColorClick;n&&n(t,r)}),e}return i(n,t.Component),o(n,[{key:"render",value:function(){var e=this,r=this.props,n=r.classes,o=r.layout,a=r.colors,i=r.children,c=[],u={};for(var s in a){var l=o[s];if(l){var p=this.getRgbaValue(a[s]);l.static?u[s]=p:c.push({id:s,value:p})}}for(var b in o){var h=o[b],d=h.offset_hsl,g=h.offset_from;d&&g&&a[g]&&c.push({id:b,value:this.getRgbaValue(a[g],d)})}for(var m in o)o[m].static&&(u[m]?c.push({id:m,value:u[m]}):c.push({id:m,value:this.getRgbaValue(o[m].static)}));return t.createElement("div",{className:n&&n.root?n.root:""},c.map(function(r,o){return t.createElement(f,{key:o,className:n&&n.item?n.item:"",rgba:r.value,onClick:function(t){return e.handleColorClick(t,r)}})}),i)}}]),n}();p.propTypes={classes:e.shape({item:e.string,root:e.string}),layout:e.objectOf(e.shape({name:e.string.isRequired,offset_from:e.string,offset_hsl:e.shape({h:e.number,s:e.number,l:e.number}),static:e.string})).isRequired,colors:e.objectOf(e.string).isRequired,onColorClick:e.func};export default p;
