!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("react"),require("prop-types")):"function"==typeof define&&define.amd?define(["react","prop-types"],t):(e=e||self).DnmColorChart=t(e.React,e.PropTypes)}(this,function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function n(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return c(e)}e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e,t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;var f=function(t){function o(){return r(this,o),l(this,u(o).apply(this,arguments))}return i(o,e.PureComponent),n(o,[{key:"render",value:function(){var t=this.props,r=t.rgba,o=t.className,n=t.onClick,a="string"==typeof r?r:null;return e.createElement("div",{className:o||"",style:{backgroundColor:"rgba(".concat(r[0],", ").concat(r[1],", ").concat(r[2],", ").concat(r[3],")")},onClick:n},a)}}]),o}(),p=function(t){function o(e){var t;return r(this,o),a(c(t=l(this,u(o).call(this,e))),"hexToRgb",function(e){return e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(e,t,r,o){return"#".concat(t).concat(t).concat(r).concat(r).concat(o).concat(o)}).substring(1).match(/.{2}/g).map(function(e){return parseInt(e,16)})}),a(c(t),"rgbToHsl",function(e,t,r){e/=255,t/=255,r/=255;var o=Math.min(e,t,r),n=Math.max(e,t,r),a=n-o,i=0,u=0;return i=0==a?0:n==e?(t-r)/a%6:n==t?(r-e)/a+2:(e-t)/a+4,(i=Math.round(60*i))<0&&(i+=360),u=(n+o)/2,[i,+(100*(0==a?0:a/(1-Math.abs(2*u-1)))).toFixed(1),u=+(100*u).toFixed(1)]}),a(c(t),"hslToRgb",function(e,t,r){for((t/=100)>1?t=1:t<0&&(t=0),(r/=100)>1?r=1:r<0&&(r=0);e<0;)e+=360;e%=360;var o=(1-Math.abs(2*r-1))*t,n=o*(1-Math.abs(e/60%2-1)),a=r-o/2,i=0,u=0,s=0;return e>=0&&e<60?(i=o,u=n,s=0):e>=60&&e<120?(i=n,u=o,s=0):e>=120&&e<180?(i=0,u=o,s=n):e>=180&&e<240?(i=0,u=n,s=o):e>=240&&e<300?(i=n,u=0,s=o):e>=300&&e<360&&(i=o,u=0,s=n),[i=Math.round(255*(i+a)),u=Math.round(255*(u+a)),s=Math.round(255*(s+a))]}),a(c(t),"getRgbaValue",function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return"string"==typeof e&&(e=t.hexToRgb(e)).push(1),r&&(e=t.offsetHslFromRgba(e,3.6*parseFloat(r.h),parseFloat(r.s),parseFloat(r.l))),e}),a(c(t),"offsetHslFromRgba",function(e,r,o,n){var a=t.rgbToHsl(e[0],e[1],e[2]),i=t.hslToRgb(a[0]+r,a[1]+o,a[2]+n);return[i[0],i[1],i[2],e[3]]}),a(c(t),"handleColorClick",function(e,r){var o=t.props.onColorClick;o&&o(e,r)}),t}return i(o,e.Component),n(o,[{key:"render",value:function(){var t=this,r=this.props,o=r.classes,n=r.layout,a=r.colors,i=r.children,u=[],s={};for(var c in a){var l=n[c];if(l)if(a[c].match(/{{\s*[\w\.]+\s*}}/))switch(a[c]){case"{{ mainColor }}":u.push({id:c,value:"P"});break;case"{{ secondaryColor }}":u.push({id:c,value:"S"});break;case"{{ extraColor }}":u.push({id:c,value:"A"})}else{var p=this.getRgbaValue(a[c]);l.static?s[c]=p:u.push({id:c,value:p})}}for(var h in n){var b=n[h],d=b.offset_hsl,y=b.offset_from;if(d&&y&&a[y])if(a[y].match(/{{\s*[\w\.]+\s*}}/))switch(a[y]){case"{{ mainColor }}":u.push({id:h,value:"_P"});break;case"{{ secondaryColor }}":u.push({id:h,value:"_S"});break;case"{{ extraColor }}":u.push({id:h,value:"_A"})}else u.push({id:h,value:this.getRgbaValue(a[y],d)})}for(var v in n)n[v].static&&(s[v]?u.push({id:v,value:s[v]}):u.push({id:v,value:this.getRgbaValue(n[v].static)}));return e.createElement("div",{className:o&&o.root?o.root:""},u.map(function(r,n){return e.createElement(f,{key:n,className:o&&o.item?o.item:"",rgba:r.value,onClick:function(e){return t.handleColorClick(e,r)}})}),i)}}]),o}();return p.propTypes={classes:t.shape({item:t.string,root:t.string}),layout:t.objectOf(t.shape({name:t.string.isRequired,offset_from:t.string,offset_hsl:t.shape({h:t.number,s:t.number,l:t.number}),static:t.string})).isRequired,colors:t.objectOf(t.string).isRequired,onColorClick:t.func},p});
